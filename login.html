<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login & Register</title>
    <!-- Include Tailwind CSS via CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Include Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Galaxy background styling */
        body {
            background: linear-gradient(135deg, #0A0A23 0%, #1A1A3A 100%);
            position: relative;
            overflow: hidden;
        }
        /* Container for stars and nebula */
        .galaxy-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        /* Nebula effect with subtle movement and color shift */
        .galaxy-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(75, 0, 130, 0.2) 0%, rgba(0, 0, 50, 0) 70%);
            opacity: 0.3;
            animation: nebulaMove 60s linear infinite;
        }
        @keyframes nebulaMove {
            0% { transform: translate(0, 0); background: radial-gradient(circle, rgba(75, 0, 130, 0.2) 0%, rgba(0, 0, 50, 0) 70%); }
            50% { background: radial-gradient(circle, rgba(0, 0, 150, 0.2) 0%, rgba(0, 0, 50, 0) 70%); }
            100% { transform: translate(-50%, -50%); background: radial-gradient(circle, rgba(75, 0, 130, 0.2) 0%, rgba(0, 0, 50, 0) 70%); }
        }
        /* Stars styling */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .stars span {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 5s infinite, moveStar 30s linear infinite;
            opacity: 0.8;
        }
        /* Generate 20 stars with random positions, sizes, and delays */
        .stars span:nth-child(1) { width: 2px; height: 2px; top: 5%; left: 10%; animation-delay: 0.1s; }
        .stars span:nth-child(2) { width: 3px; height: 3px; top: 15%; left: 20%; animation-delay: 0.5s; }
        .stars span:nth-child(3) { width: 1px; height: 1px; top: 25%; left: 30%; animation-delay: 1s; }
        .stars span:nth-child(4) { width: 2px; height: 2px; top: 35%; left: 40%; animation-delay: 1.5s; }
        .stars span:nth-child(5) { width: 3px; height: 3px; top: 45%; left: 50%; animation-delay: 2s; }
        .stars span:nth-child(6) { width: 1px; height: 1px; top: 55%; left: 60%; animation-delay: 2.5s; }
        .stars span:nth-child(7) { width: 2px; height: 2px; top: 65%; left: 70%; animation-delay: 3s; }
        .stars span:nth-child(8) { width: 3px; height: 3px; top: 75%; left: 80%; animation-delay: 3.5s; }
        .stars span:nth-child(9) { width: 1px; height: 1px; top: 85%; left: 90%; animation-delay: 4s; }
        .stars span:nth-child(10) { width: 2px; height: 2px; top: 95%; left: 5%; animation-delay: 4.5s; }
        .stars span:nth-child(11) { width: 1px; height: 1px; top: 10%; left: 15%; animation-delay: 0.2s; }
        .stars span:nth-child(12) { width: 2px; height: 2px; top: 20%; left: 25%; animation-delay: 0.7s; }
        .stars span:nth-child(13) { width: 3px; height: 3px; top: 30%; left: 35%; animation-delay: 1.2s; }
        .stars span:nth-child(14) { width: 1px; height: 1px; top: 40%; left: 45%; animation-delay: 1.7s; }
        .stars span:nth-child(15) { width: 2px; height: 2px; top: 50%; left: 55%; animation-delay: 2.2s; }
        .stars span:nth-child(16) { width: 3px; height: 3px; top: 60%; left: 65%; animation-delay: 2.7s; }
        .stars span:nth-child(17) { width: 1px; height: 1px; top: 70%; left: 75%; animation-delay: 3.2s; }
        .stars span:nth-child(18) { width: 2px; height: 2px; top: 80%; left: 85%; animation-delay: 3.7s; }
        .stars span:nth-child(19) { width: 3px; height: 3px; top: 90%; left: 95%; animation-delay: 4.2s; }
        .stars span:nth-child(20) { width: 1px; height: 1px; top: 5%; left: 25%; animation-delay: 4.7s; }
        /* Twinkle animation for stars */
        @keyframes twinkle {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.2; }
        }
        season/* Move stars across the screen */
        @keyframes moveStar {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100vw, 100vh); }
        }
        /* Slide-in animation for forms */
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }
        /* Slide-out animation for forms */
        @keyframes slideOut {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(-100%); }
        }
        /* Fade-in animation for forgot password form */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-in { animation: slideIn 0.5s ease-out forwards; }
        .slide-out { animation: slideOut 0.5s ease-out forwards; } /* Fixed typo in original code (PortsmouthOut to slideOut) */
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        /* Button hover animation */
        .btn-hover:hover {
            transition: all 0.3s ease-in-out;
            transform: scale(1.05);
            background-color: #111827;
        }
        /* Social button hover animation */
        .social-btn-hover:hover {
            transition: all 0.3s ease-in-out;
            transform: scale(1.05);
            background-color: #f3f4f6;
        }
        /* Divider with text */
        .divider {
            display: flex;
            align-items: center;
            text-align: center;
            color: #6b7280;
            margin: 20px 0;
        }
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #d1d5db;
        }
        .divider::before { margin-right: 10px; }
        .divider::after { margin-left: 10px; }
        /* Input field style */
        .input-field {
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #d1d5db;
            width: 100%;
        }
        /* Pink border for username/email field */
        .input-pink {
            border: 1px solid #f9a8d4;
        }
        /* Form container background */
        .form-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <!-- Galaxy Background with stars and nebula effects -->
    <div class="galaxy-bg">
        <div class="stars">
            <span></span><span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span><span></span>
        </div>
    </div>

    <!-- Login Form -->
    <div id="loginForm" class="w-full max-w-sm">
        <div class="form-container p-6">
            <!-- Changed "Sign in" to "Login" as per requirement -->
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Login</h2>
            <!-- Social Login Buttons -->
            <button onclick="handleGoogleLogin()" class="w-full bg-gray-100 text-gray-700 py-3 rounded-lg social-btn-hover flex items-center justify-center gap-2 mb-3">
                <i class="fab fa-google text-red-500"></i> Continue with Google
            </button>
            <button onclick="handleFacebookLogin()" class="w-full bg-gray-100 text-gray-700 py-3 rounded-lg social-btn-hover flex items-center justify-center gap-2 mb-3">
                <i class="fab fa-facebook-f text-blue-600"></i> Continue with Facebook
            </button>
            <!-- Divider -->
            <div class="divider text-sm">or login with email</div>
            <form id="login" onsubmit="handleLogin(event)">
                <!-- Username or Email input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="loginUsernameOrEmail">Username or Email</label>
                    <input type="text" id="loginUsernameOrEmail" class="input-field input-pink" required>
                </div>
                <!-- Password input with Forgot link -->
                <div class="mb-6 flex justify-between items-center">
                    <div class="w-full">
                        <label class="block text-gray-700 text-sm mb-2" for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" class="input-field" required>
                    </div>
                    <a href="#" onclick="showForgotPassword()" class="text-sm text-blue-600 hover:underline ml-2 mt-6">Forgot?</a>
                </div>
                <!-- Changed "Sign In" button text to "Login" -->
                <button type="submit" class="w-full bg-gray-900 text-white py-3 rounded-lg btn-hover">Login</button>
            </form>
            <!-- Login Status Message: Displays "Success" or "Try Again" after login attempt -->
            <div id="loginStatus" class="text-center mt-4 text-lg font-semibold"></div>
            <!-- Register button -->
            <div class="text-center mt-4">
                <button onclick="showRegister()" class="w-full bg-gray-600 text-white py-3 rounded-lg btn-hover">Register</button>
            </div>
        </div>
    </div>

    <!-- Register Form (hidden by default) -->
    <div id="registerForm" class="w-full max-w-sm hidden">
        <div class="form-container p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Register</h2>
            <form id="register" onsubmit="handleRegister(event)">
                <!-- Full Name input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="registerFullName">Full Name</label>
                    <input type="text" id="registerFullName" class="input-field" required>
                </div>
                <!-- Username input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="registerUsername">Username</label>
                    <input type="text" id="registerUsername" class="input-field" required>
                </div>
                <!-- Email input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" class="input-field" required>
                </div>
                <!-- Phone Number input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="registerPhone">Phone Number</label>
                    <input type="tel" id="registerPhone" class="input-field" pattern="[0-9]{10}" required>
                </div>
                <!-- Password input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" class="input-field" required>
                </div>
                <!-- Confirm Password input -->
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm mb-2" for="registerConfirmPassword">Confirm Password</label>
                    <input type="password" id="registerConfirmPassword" class="input-field" required>
                </div>
                <!-- Submit button -->
                <button type="submit" class="w-full bg-gray-900 text-white py-3 rounded-lg btn-hover">Register</button>
            </form>
            <!-- Link to return to login -->
            <div class="text-center mt-4">
                <a href="#" onclick="showLogin()" class="text-sm text-blue-600 hover:underline">Already have an account? Login</a>
            </div>
        </div>
    </div>

    <!-- Forgot Password Form (hidden by default) -->
    <div id="forgotPasswordForm" class="w-full max-w-sm hidden">
        <div class="form-container p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Forgot Password</h2>
            <form id="forgotPassword" onsubmit="handleForgotPassword(event)">
                <!-- Email input -->
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm mb-2" for="forgotEmail">Email</label>
                    <input type="email" id="forgotEmail" class="input-field" required>
                </div>
                <!-- Submit button -->
                <button type="submit" class="w-full bg-gray-900 text-white py-3 rounded-lg btn-hover">Send Reset Link</button>
            </form>
            <!-- Link to return to login -->
            <div class="text-center mt-4">
                <a href="#" onclick="showLogin()" class="text-sm text-blue-600 hover:underline">Back to Login</a>
            </div>
        </div>
    </div>

    <!-- Reset Password Form (hidden by default) -->
    <div id="resetPasswordForm" class="w-full max-w-sm hidden">
        <div class="form-container p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Reset Password</h2>
            <form id="resetPassword" onsubmit="handleResetPassword(event)">
                <!-- Code input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="resetCode">Verification Code</label>
                    <input type="text" id="resetCode" class="input-field" required>
                </div>
                <!-- New Password input -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm mb-2" for="newPassword">New Password</label>
                    <input type="password" id="newPassword" class="input-field" required>
                </div>
                <!-- Confirm New Password input -->
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm mb-2" for="confirmNewPassword">Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" class="input-field" required>
                </div>
                <!-- Submit button -->
                <button type="submit" class="w-full bg-gray-900 text-white py-3 rounded-lg btn-hover">Reset Password</button>
            </form>
            <!-- Link to return to login -->
            <div class="text-center mt-4">
                <a href="#" onclick="showLogin()" class="text-sm text-blue-600 hover:underline">Back to Login</a>
            </div>
        </div>
    </div>

    <script>
        // Initialize localStorage for users if it doesn't exist
        if (!localStorage.getItem('users')) {
            localStorage.setItem('users', JSON.stringify([]));
        }

        // Predefined credentials for Google and Facebook (for demo purposes)
        const googleCredentials = { email: "user@google.com", password: "google123" };
        const facebookCredentials = { email: "user@fb.com", password: "fb123" };
        let resetCode = null; // Stores verification code for password reset
        let resetEmail = null; // Stores email for password reset

        // Show login form by default and clear login status
        function showLogin() {
            const forms = [
                document.getElementById('loginForm'),
                document.getElementById('registerForm'),
                document.getElementById('forgotPasswordForm'),
                document.getElementById('resetPasswordForm')
            ];
            forms.forEach((form, index) => {
                if (!form.classList.contains('hidden') && index !== 0) {
                    form.classList.add('slide-out');
                    setTimeout(() => {
                        form.classList.add('hidden');
                        form.classList.remove('slide-out');
                        forms[0].classList.remove('hidden');
                        forms[0].classList.add('slide-in');
                        // Clear login status message when returning to login form
                        document.getElementById('loginStatus').textContent = '';
                    }, 500);
                }
            });
        }

        // Show register form with slide animation
        function showRegister() {
            const forms = [
                document.getElementById('loginForm'),
                document.getElementById('registerForm'),
                document.getElementById('forgotPasswordForm'),
                document.getElementById('resetPasswordForm')
            ];
            forms.forEach((form, index) => {
                if (!form.classList.contains('hidden')) {
                    form.classList.add('slide-out');
                    setTimeout(() => {
                        form.classList.add('hidden');
                        form.classList.remove('slide-out');
                        forms[1].classList.remove('hidden');
                        forms[1].classList.add('slide-in');
                    }, 500);
                }
            });
        }

        // Show forgot password form with fade animation
        function showForgotPassword() {
            const forms = [
                document.getElementById('loginForm'),
                document.getElementById('registerForm'),
                document.getElementById('forgotPasswordForm'),
                document.getElementById('resetPasswordForm')
            ];
            forms.forEach((form, index) => {
                if (!form.classList.contains('hidden')) {
                    form.classList.add('slide-out');
                    setTimeout(() => {
                        form.classList.add('hidden');
                        form.classList.remove('slide-out');
                        forms[2].classList.remove('hidden');
                        forms[2].classList.add('fade-in');
                    }, 500);
                }
            });
        }

        // Show reset password form with fade animation
        function showResetPassword() {
            const forms = [
                document.getElementById('loginForm'),
                document.getElementById('registerForm'),
                document.getElementById('forgotPasswordForm'),
                document.getElementById('resetPasswordForm')
            ];
            forms.forEach((form, index) => {
                if (!form.classList.contains('hidden')) {
                    form.classList.add('slide-out');
                    setTimeout(() => {
                        form.classList.add('hidden');
                        form.classList.remove('slide-out');
                        forms[3].classList.remove('hidden');
                        forms[3].classList.add('fade-in');
                    }, 500);
                }
            });
        }

        // Handle login form submission
        function handleLogin(event) {
            event.preventDefault(); // Prevent form from submitting traditionally
            const usernameOrEmail = document.getElementById('loginUsernameOrEmail').value;
            const password = document.getElementById('loginPassword').value;
            const loginStatus = document.getElementById('loginStatus'); // Div to display status

            // Validate that both fields are filled
            if (!usernameOrEmail || !password) {
                loginStatus.textContent = 'Please fill in both fields!';
                loginStatus.className = 'text-center mt-4 text-lg font-semibold text-red-600';
                return;
            }

            // Retrieve users from localStorage
            const users = JSON.parse(localStorage.getItem('users'));
            // Check if username or email exists and password matches
            const user = users.find(
                user => (user.username === usernameOrEmail || user.email === usernameOrEmail) && user.password === password
            );

            // Display success or failure message and redirect on success
            if (user) {
                loginStatus.textContent = 'Success'; // Show success message
                loginStatus.className = 'text-center mt-4 text-lg font-semibold text-green-600';
                document.getElementById('login').reset(); // Clear form for better UX
                // Redirect to homepage after a short delay to show success message
                setTimeout(() => {
                    window.location.href = 'index.html'; // Redirect to homepage
                }, 1000);
            } else {
                loginStatus.textContent = 'Try Again'; // Show failure message
                loginStatus.className = 'text-center mt-4 text-lg font-semibold text-red-600';
            }
        }

        // Handle Google login (demo, checks predefined credentials)
        function handleGoogleLogin() {
            const loginStatus = document.getElementById('loginStatus');
            const users = JSON.parse(localStorage.getItem('users'));
            // Check if Google credentials exist in registered users
            const user = users.find(
                user => user.email === googleCredentials.email && user.password === googleCredentials.password
            );

            // Display success or failure message and redirect on success
            if (user) {
                loginStatus.textContent = 'Success';
                loginStatus.className = 'text-center mt-4 text-lg font-semibold text-green-600';
                // Redirect to homepage after a short delay
                setTimeout(() => {
                    window.location.href = 'index.html'; // Redirect to homepage
                }, 1000);
            } else {
                loginStatus.textContent = 'Try Again';
                loginStatus.className = 'text-center mt-4 text-lg font-semibold text-red-600';
            }
        }

        // Handle Facebook login (demo, checks predefined credentials)
        function handleFacebookLogin() {
            const loginStatus = document.getElementById('loginStatus');
            const users = JSON.parse(localStorage.getItem('users'));
            // Check if Facebook credentials exist in registered users
            const user = users.find(
                user => user.email === facebookCredentials.email && user.password === facebookCredentials.password
            );

            // Display success or failure message and redirect on success
            if (user) {
                loginStatus.textContent = 'Success';
                loginStatus.className = 'text-center mt-4 text-lg font-semibold text-green-600';
                // Redirect to homepage after a short delay
                setTimeout(() => {
                    window.location.href = 'index.html'; // Redirect to homepage
                }, 1000);
            } else {
                loginStatus.textContent = 'Try Again';
                loginStatus.className = 'text-center mt-4 text-lg font-semibold text-red-600';
            }
        }

        // Handle register form submission
        function handleRegister(event) {
            event.preventDefault();
            const fullName = document.getElementById('registerFullName').value;
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            // Validate password match
            if (password !== confirmPassword) {
                alert("Passwords do not match!");
                return;
            }

            // Get users from localStorage
            const users = JSON.parse(localStorage.getItem('users'));

            // Check if email already exists
            if (users.some(user => user.email === email)) {
                alert("Email already registered!");
                return;
            }

            // Save user data to localStorage
            users.push({ fullName, username, email, phone, password });
            localStorage.setItem('users', JSON.stringify(users));

            alert("Registration successful! Please login.");
            showLogin(); // Switch to login form
        }

        // Handle forgot password form submission
        function handleForgotPassword(event) {
            event.preventDefault();
            const email = document.getElementById('forgotEmail').value;
            const users = JSON.parse(localStorage.getItem('users'));
            const user = users.find(user => user.email === email);

            // If email exists, generate and "send" a verification code
            if (user) {
                resetCode = Math.floor(100000 + Math.random() * 900000).toString();
                resetEmail = email;
                alert(`A verification code has been sent to ${email}: ${resetCode}`);
                showResetPassword();
            } else {
                alert("Email not found!");
            }
        }

        // Handle reset password form submission
        function handleResetPassword(event) {
            event.preventDefault();
            const code = document.getElementById('resetCode').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;

            // Validate verification code
            if (code !== resetCode) {
                alert("Invalid verification code!");
                return;
            }

            // Validate password match
            if (newPassword !== confirmNewPassword) {
                alert("New passwords do not match!");
                return;
            }

            // Update password in localStorage
            const users = JSON.parse(localStorage.getItem('users'));
            const userIndex = users.findIndex(user => user.email === resetEmail);
            if (userIndex !== -1) {
                users[userIndex].password = newPassword;
                localStorage.setItem('users', JSON.stringify(users));
                alert("Password reset successful! Please login with your new password.");
                resetCode = null;
                resetEmail = null;
                showLogin();
            } else {
                alert("Error: User not found!");
            }
        }
    </script>
</body>
</html>
